<div class="fixed right-0 md:right-4 top-[130px] md:top-[70px] z-10 w-full max-w-md md:max-w-lg bg-white shadow-2xl rounded-lg overflow-hidden">
    <div class="bg-gradient-to-r from-blue-500 to-teal-400 p-4">
      <h2 class="text-xl font-bold text-white text-center">Chat History</h2>
    </div>
    
    <div class="max-h-[500px] overflow-y-auto bg-gray-50">
      <ul class="divide-y divide-gray-200">
        <ng-container *ngFor="let data of chatListDat">
          <ng-container *ngIf="userData?.category == 'contractor'; else nonContractor">
            <li class="hover:bg-gray-100 transition-colors duration-150 ease-in-out cursor-pointer"
                (click)="getSelect(data.userId, data.componyId)">
              <div class="flex items-center px-4 py-3 sm:px-6">
                <div class="flex-shrink-0">
                  <img *ngIf="data?.senderData[0].image" [src]="data?.senderData[0].image" 
                       class="h-12 w-12 rounded-full object-cover border-2 border-blue-200" 
                       alt="User Avatar">
                  <div *ngIf="!data?.senderData[0].image" 
                       class="h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center">
                    <i class="fa-regular fa-user text-blue-500 text-xl"></i>
                  </div>
                </div>
                <div class="ml-4 flex-1 flex justify-between items-center">
                  <div>
                    <p class="text-sm font-medium text-gray-900" *ngIf="data?.senderData[0].componyName">
                      {{data?.senderData[0].componyName}}
                    </p>
                    <p class="text-sm font-medium text-gray-900" *ngIf="data?.senderData[0].name">
                      {{data?.senderData[0].name}}
                    </p>
                  </div>
                  <div *ngIf="data.newMessageCount > 0" 
                       class="bg-blue-500 text-white text-xs font-bold rounded-full h-6 w-6 flex items-center justify-center">
                    {{data.newMessageCount}}
                  </div>
                </div>
              </div>
            </li>
          </ng-container>
          
          <ng-template #nonContractor>
            <li class="hover:bg-gray-100 transition-colors duration-150 ease-in-out cursor-pointer"
                (click)="getSelect(data.contractorId, data.componyId)">
              <div class="flex items-center px-4 py-3 sm:px-6">
                <div class="flex-shrink-0">
                  <img *ngIf="data?.senderData[0].image" [src]="data?.senderData[0].image" 
                       class="h-12 w-12 rounded-full object-cover border-2 border-teal-200" 
                       alt="User Avatar">
                  <div *ngIf="!data?.senderData[0].image" 
                       class="h-12 w-12 rounded-full bg-teal-100 flex items-center justify-center">
                    <i class="fa-regular fa-user text-teal-500 text-xl"></i>
                  </div>
                </div>
                <div class="ml-4 flex-1 flex justify-between items-center">
                  <div>
                    <p class="text-sm font-medium text-gray-900" *ngIf="data?.senderData[0].componyName">
                      {{data?.senderData[0].componyName}}
                    </p>
                    <p class="text-sm font-medium text-gray-900" *ngIf="data?.senderData[0].name">
                      {{data?.senderData[0].name}}
                    </p>
                  </div>
                  <div *ngIf="data.newMessageCount > 0" 
                       class="bg-teal-500 text-white text-xs font-bold rounded-full h-6 w-6 flex items-center justify-center">
                    {{data.newMessageCount}}
                  </div>
                </div>
              </div>
            </li>
          </ng-template>
        </ng-container>
      </ul>
    </div>
  </div>